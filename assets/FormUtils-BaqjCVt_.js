import{a as u,r as d,j as e,L as b,e as v,z as w,A as m,n as g,y as N,B as x,D as f,E as F,I as L}from"./index-BYLV5N22.js";const p=({label:s,submenus:t})=>{const a=u(),[n,o]=d.useState(!1);d.useEffect(()=>{t&&t.some(r=>r.path===a.pathname)?o(!0):o(!1)},[t,a.pathname]);const c=r=>a.pathname===r;return e.jsx("li",{children:e.jsxs("div",{children:[e.jsxs("span",{className:"block py-4 px-4 bg-green-700 text-white cursor-pointer select-none relative",onClick:()=>o(!n),children:[s,e.jsx("svg",{className:`w-6 h-6 absolute top-1/2 right-4 transform -translate-y-1/2 ${n?"rotate-90":"rotate-0"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),n&&t&&e.jsx("ul",{children:t.map((r,l)=>e.jsx("li",{children:r.disabled?e.jsx("span",{className:"block py-2 pl-8 text-gray-400 dark:text-gray-600 cursor-not-allowed select-none",children:r.label}):e.jsx(b,{to:r.path,className:`block py-2 pl-8 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 ${c(r.path)?"font-bold dark:bg-gray-800 dark:text-green-500 border-l-8 border-green-500":""} select-none`,children:r.label})},l))})]})})},M=()=>e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx(D,{})]}),C=()=>e.jsx("aside",{className:"hidden inset-y-0 pt-16 left-0 bg-gray-200 dark:bg-gray-800 w-80 min-h-screen fixed lg:flex flex-col",children:e.jsxs("ul",{className:"flex-1 mt-4",children:[e.jsx(p,{label:"Submit Feedback",submenus:[{label:"Overall Experience Feedback",path:"/feedback/submit"},{label:"Feedback 2",path:"/feedback/specific",disabled:!0},{label:"Feedback 3",path:"/feedback/another",disabled:!0}]}),e.jsx(p,{label:"Read Feedback",submenus:[{label:"Your feedbacks",path:"/feedback/"}]})]})}),D=()=>{const[s,t]=d.useState(!1),a=u();return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"fixed z-20 left-4 lg:hidden bg-red-600 hover:bg-red-700 focus:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 dark:focus:bg-red-800 p-1 rounded-md text-white scale-110",onClick:()=>t(!s),children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),s&&e.jsx("div",{className:"fixed inset-0 z-10 bg-black bg-opacity-50 lg:hidden",onClick:()=>t(!1)}),e.jsxs("nav",{className:`${s?"fixed":"hidden"} inset-0 z-30 pt-16 bg-gray-200 dark:bg-gray-800 lg:hidden flex flex-col`,children:[e.jsx("div",{className:"py-4 px-6 bg-gray-800 dark:bg-gray-700 text-white flex justify-between items-center",children:e.jsx("button",{onClick:()=>t(!1),className:"p-2 bg-red-500 hover:bg-red-600 focus:bg-red-600 dark:bg-red-700 dark:hover:bg-red-800 dark:focus:bg-red-800 rounded-md",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),e.jsxs("ul",{className:"flex-1",children:[e.jsx("li",{children:e.jsx(b,{to:"/feedback/submit",className:`block py-2 px-6 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 ${a.pathname==="/feedback/submit"?"font-bold dark:bg-gray-700 dark:text-green-500":""}`,onClick:()=>t(!1),children:"Submit Feedback"})}),e.jsx("li",{children:e.jsx(b,{to:"/feedback/",className:`block py-2 px-6 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 ${a.pathname==="/feedback/"?"font-bold dark:bg-gray-700 dark:text-green-500":""}`,onClick:()=>t(!1),children:"Read Feedback"})})]})]})]})},S=({children:s})=>e.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-slate-900 min-h-screen flex flex-col lg:ml-64 overflow-auto",children:s}),I=({children:s})=>e.jsxs("div",{className:"flex",children:[e.jsx(M,{}),e.jsx(S,{children:s})]});async function $(s,t,a){if(!s)return"User ID is not available. Please log in.";try{return await w(m(g,`users/${s}/feedback`),{...t,timestamp:N()}),a(),"Feedback submitted successfully"}catch(n){return console.error("Error adding document: ",n),"Error submitting feedback"}}const A=()=>{const[s,t]=d.useState([]),{user:a}=v();return d.useEffect(()=>{(async()=>{const o=a==null?void 0:a.userId;if(!o){console.log("User ID is undefined. Make sure user is logged in.");return}const c=a==null?void 0:a.isAdmin;let r;c?r=x(F(g,"feedback"),f("timestamp","desc")):r=x(m(g,`users/${o}/feedback`),f("timestamp","desc"));try{const y=(await L(r)).docs.map(h=>{var k;const i=h.data(),j=(k=i.timestamp)!=null&&k.toDate?i.timestamp.toDate():new Date;return{id:h.id,...i,timestamp:j}});t(y)}catch(l){console.error("Failed to fetch feedback:",l)}})()},[a]),s};export{I as L,$ as s,A as u};
